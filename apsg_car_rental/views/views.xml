<odoo>
    <data>
        <record id="rental_view_res_partner_form" model="ir.ui.view">
            <field name="name">inherit.view.res_partner.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='vat']" position="after">
                    <field name="clint_num"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                    <field name="id_issue_at"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                    <field name="id_date"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                    <field name="country_id"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='category_id']" position="after">
                    <field name="license_num"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                    <field name="license_issue_at"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                    <field name="license_date"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                    <field name="license_type"
                           attrs="{'invisible': [('is_company','=', True)], 'required':[ ('is_company','=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='type']" position="before">
                    <field name="black_list"
                           attrs="{'invisible': [('is_company','=', True)]}"/>
                </xpath>
            </field>
        </record>
        <!-- Product View -->
        <record model="ir.ui.view" id="product_product_fleet_inherit2_form">
            <field name="name">fleet.product.product.inherit2.form</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="browseinfo_rental_management.rental_products_product_form_view"/>
            <field name="arch" type="xml">
                <field name="rent_per_day" position="after">
                    <field name="afford_amount"/>
                    <field name="km_allowed"/>
                    <field name="extra_km_price"/>
                </field>
                <field name="license_plate" position="after">
                    <field name="odometer"/>
                </field>
                <xpath expr="/form/header" position="inside">
                    <field name="fleet_status" widget="statusbar" attrs="{'invisible': [('rent_ok', '=', False)]}"/>
                </xpath>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_product_inherit2_form">
            <field name="name">fleet.vehicle.product.inherit2.form</field>
            <field name="model">fleet.vehicle</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
            <field name="arch" type="xml">
                <field name="rent_per_day" position="after">
                    <field name="afford_amount" attrs="{'invisible':[('product_id', '=', False)]}"/>
                </field>
            </field>
        </record>
        <record model="ir.ui.view" id="view_rental_order_inherit_form">
            <field name="name">view.rental.order.inherit.form</field>
            <field name="model">rental.order</field>
            <field name="inherit_id" ref="browseinfo_rental_management.view_rental_order_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="after">
                    <field name="additional_driver_active"/>
                    <field name="outgoing_done" invisible="1"/>
                    <field name="incoming_done" invisible="1"/>
                    <field name="additional_driver_id" context="{'search_default_customer':1, 'show_address': 1}"
                           options="{&quot;always_reload&quot;: True}"
                           attrs="{'readonly': [('state', 'in', ('confirm','close'))],'invisible': [('additional_driver_active','=', False)], 'required':[ ('additional_driver_active','=', True)]}"/>
                    <field name="tamm_auth" attrs="{'readonly': [('state', 'in', ('confirm','close'))]}"/>
                    <field name="shmoos" attrs="{'readonly': [('state', 'in', ('confirm','close'))]}"/>
                </field>
                <xpath expr="//div[@name='Freq']" position="after">
                    <label for="extended_period" attrs="{'invisible': [('extended_period', '=', 0)]}"/>
                    <div class="o_row" name="extended">
                        <field name="extended_period" attrs="{'invisible': [('extended_period', '=', 0)]}"/>
                        <field name="extended_period_type" nolabel="1"
                               attrs="{'invisible': [('extended_period', '=', 0)]}"/>
                    </div>
                </xpath>
                <xpath expr="/form/header" position="inside">
                    <button name="action_button_vehicle_checking"
                            string="Vehicle Checking" class="oe_highlight"
                            attrs="{'invisible': ['|',('outgoing_done','!=', True),('state', '!=', 'confirm')]}"
                            type="object"/>
                </xpath>
                <xpath expr="//button[@name='action_button_close_rental']" position="replace">
                    <button name="action_button_close_rental"
                            attrs="{'invisible': ['|','|',('outgoing_done','!=', True),
                            ('incoming_done', '!=', True),
                            ('state', '!=', 'checking')]}"
                            string="Close Rental" class="oe_highlight" type="object"/>
                </xpath>
                <xpath expr="//button[@name='%(browseinfo_rental_management.action_view_rental_product_replace)d']"
                       position="replace">
<!--                    <button name="%(browseinfo_rental_management.action_view_rental_product_replace)d"-->
<!--                            attrs="{'invisible': ['|','|',('outgoing_done','!=', True),-->
<!--                            ('incoming_done', '=', True),('state', '!=', 'confirm')]}"-->
<!--                            string="Replace Product" class="oe_highlight"-->
<!--                            type="action"/>-->
                </xpath>
                <xpath expr="//button[@name='%(browseinfo_rental_management.action_extend_renew_rental)d']"
                       position="replace">
                    <button name="%(browseinfo_rental_management.action_extend_renew_rental)d"
                            attrs="{'invisible': ['|','|',('outgoing_done','!=', True),
                            ('incoming_done', '=', True),('state', '!=', 'confirm')]}"
                            string="Extend/Renew Rental" class="oe_highlight"
                            type="action"/>
                </xpath>
                <field name="rental_line" position="replace">
                    <field nolabel="1" name="rental_line" widget="one2many"
                           attrs="{'readonly': [('state', 'in', ('confirm','close'))]}">
                        <tree editable="bottom">
                            <field name="lot_id" required="1" context="{'from_lot_search':True}"
                                   domain="[('product_id.rent_ok','=',True)]"/>
                            <field name="product_categ_id"
                                   readonly="1"/>
                            <field name="product_id"
                                   domain="[('rent_ok','=',True),('categ_id','=', product_categ_id)]"
                                   readonly="1"/>
                            <field name="fleet_id" attrs="{'invisible':[('product_id', '=', False)]}" readonly="True"/>
                            <field name="license_plate" attrs="{'invisible':[('product_id', '=', False)]}"
                                   readonly="True"/>
                            <field name="price_unit"/>
                            <field name="tax_id" widget="many2many_tags"/>
                            <field name="name"/>
                            <field name="price_subtotal" invisible="1"/>
                            <field name="price_total" invisible="1"/>
                            <field name="price_tax" invisible="1"/>
                        </tree>
                    </field>
                </field>
            </field>
        </record>
        <record id="view_picking_checklist_form" model="ir.ui.view">
            <field name="name">stock.picking_checklist.form.view</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//notebook" position="inside">
                        <page name="checklist" attrs="{'invisible':[('for_rental_move', '=', False)]}" string="Checklist">
                            <group>
                                <group>
                                    <field name="for_rental_move" invisible="1"/>
                                    <field name="attachment_ids" widget="many2many_binary" class="oe_inline"/>
                                </group>
                                <group>
                                </group>
                            </group>
                            <field name="checklist_line">
                                <tree string="Fleet Checklist Lines" editable="bottom">
                                    <field name="name"/>
                                    <field name="checklist_active"/>
                                    <field name="checklist_number" invisible="True"/>
                                    <field name="price"/>
                                </tree>
                                <form>
                                    <sheet>
                                        <group>
                                            <field name="name"/>
                                            <field name="checklist_active" invisible="1"/>
                                            <field name="checklist_number" invisible="1"/>
                                        </group>
                                    </sheet>
                                </form>
                            </field>
                            <field name="car_checked" invisible="1"/>
                            <div style="float: right;margin-left: 78%;margin-bottom: 36px;">
                                <button name="action_verify" string="Verify" type="object"
                                        style="width: 100px !important;height: 40px;"
                                        attrs="{'invisible': [('car_checked', '!=', False)]}"
                                        class="oe_subtotal_footer oe_right oe_highlight"/>
                            </div>
                        </page>

                    </xpath>
                    <field name="quantity_done" position="after">

                        <field name="odometer" attrs="{'invisible':[('rent_ok', '=', False)]}"/>
                        <field name="new_odometer" attrs="{'invisible':[('rent_ok', '=', False)]}"/>
                        <field name="rent_ok" invisible="True"/>
                    </field>

                </data>
            </field>
        </record>

    </data>
</odoo>
